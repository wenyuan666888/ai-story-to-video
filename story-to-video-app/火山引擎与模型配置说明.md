# 火山引擎配置说明 & 能否用 Cursor 大模型

## 当前版本说明

**本应用已支持火山引擎图片生成。** 配置 `VOLC_API_KEY` 后，分镜图片将使用 Seedream 按描述文生图，与文本描述一致。

- **分镜 → 图片**：  
  - **已配置 VOLC_API_KEY**：使用火山方舟 Seedream（`doubao-seedream-4-5-251128`）文生图。  
  - **若报错「has not activated the model」**：需在 [火山方舟控制台](https://console.volcengine.com/ark) 的 **开通管理 / 模型服务** 中**开通并激活 Seedream 4.5** 模型后再试。未开通时，应用会自动退回到 Unsplash 或 Picsum 占位图，不影响继续生成。  
  - 未配置 VOLC 时：可选 **UNSPLASH_ACCESS_KEY** 按关键词搜索；再不配置则 Picsum 占位图。
- **分镜 → 视频**：  
  - **已配置 VOLC_API_KEY 且已开通 Seedance**：使用 **Seedance 图生视频**，按分镜图片 + 描述生成与内容相关的短视频（异步，约 1～3 分钟）。  
  - 未开通或未配置时：使用免费示例视频，与描述无关。

若希望**图片与视频均符合描述**，请在 `.env.local` 中配置 **VOLC_API_KEY**，并在火山方舟控制台分别开通 **Seedream（图像）** 与 **Seedance（视频）** 模型（API Key 管理：<https://console.volcengine.com/ark>）。

---

## 一、火山引擎如何配置（仅作参考，当前未使用）

### 1. 注册与开通

1. 打开 **https://console.volcengine.com** ，用手机号或邮箱注册并登录。
2. 完成**实名认证**（个人或企业均可）。
3. 在控制台搜索 **「火山方舟」** 或 **「大模型」**，进入 **火山方舟大模型服务平台**。
4. 在 **开通管理** 中开通你需要的服务（如「在线推理」等，按页面提示操作）。

### 2. 获取 API Key（图片/视频都用同一个 Key）

1. 在火山方舟控制台找到 **「API Key 管理」** 或 **「推理接入点」** 相关入口。  
   也可直接打开：**https://console.volcengine.com/ark**（方舟/豆包相关）。
2. 创建 **API Key**，复制保存（只显示一次，注意保密）。
3. 若使用「推理接入点」方式，需在 **在线推理** 里创建接入点，选择 **图像生成**（如 Seedream）、**视频生成**（如 Seedance）对应模型，再在接入点详情里看到调用地址和鉴权方式。

本项目中若将来恢复火山引擎接入，图片、视频接口均使用 **Bearer Token** 方式，即把该 API Key 填到环境变量里即可。

### 3. 在本项目里配置（当前未使用）

在 **`story-to-video-app/.env.local`** 中增加一行：

```env
VOLC_API_KEY=你复制的火山引擎API密钥
```

当前代码已移除火山引擎调用，填写该变量不会生效。

---

## 二、火山引擎免费吗？

- **有免费额度**：火山方舟对新用户有**免费推理额度**（例如 50 万 token 等，以控制台「免费推理额度」页面为准），主要用于**文本类大模型推理**。
- **图像/视频单独计费**：  
  - **图像生成**（如 Seedream）：通常按**张**计费（例如约 ¥0.3/张，以控制台或「模型服务计费说明」为准）。  
  - **视频生成**（如 Seedance）：按**任务/时长**等计费，具体见控制台或计费文档。  
  因此：**文本推理可能有免费额度，图片和视频一般不在“免费推理 token”里，需要看是否另有体验额度或按量付费。**

---

## 三、可以换成 Cursor 的大模型吗？

**结论：不能把「Cursor 里用的大模型」直接当成你应用的 API 来用；但「故事 → 分镜」可以换成任意 OpenAI 兼容大模型。**

### 1. Cursor 和「你的应用」是两回事

- **Cursor** 是编辑器里的 AI 助手，它用的大模型是 Cursor 公司接好的，**不对外提供「给你的应用调用的 API」**。  
  所以：**没有办法在 story-to-video-app 里配置「用 Cursor 的大模型」来生成分镜/图片/视频。**

### 2. 你的应用里可以怎么用大模型

| 能力           | 当前实现                     | 能否换 / 怎么换 |
|----------------|------------------------------|------------------|
| **故事 → 分镜** | OpenAI 兼容接口（如 GPT）     | **可以换**。在 `.env.local` 里配置任意 **OpenAI 兼容** 的 API：<br>• `OPENAI_API_KEY`<br>• `OPENAI_BASE_URL`（若非 OpenAI 官方，填对方提供的 chat 接口地址）<br>例如：智谱、通义、DeepSeek、One API 自建等，只要支持 chat completions 即可。 |
| **分镜 → 图片** | 免费图床（Picsum）           | 当前为免费方案，无需 API。若需真实文生图，可自行接入火山/其他文生图 API 并改代码。 |
| **图片 → 视频** | 免费示例视频                 | 当前为免费方案，无需 API。若需真实图生视频，可自行接入火山/其他服务并改代码。 |

---

## 四、推荐组合（当前版本）

1. **故事 → 分镜（文字）**  
   - 在 `.env.local` 里配置 **OPENAI_API_KEY** 和（如需要）**OPENAI_BASE_URL**。  
   - 填智谱、通义、DeepSeek、OpenAI 等任意一家「OpenAI 兼容 chat」的 key 和地址即可。  
   - 不填则使用内置 Mock，根据故事内容拆分为分镜描述。

2. **分镜 → 图片 / 视频**  
   - 无需配置。当前使用免费图与示例视频直接生成。

如果你告诉我：打算用哪一家做「故事→分镜」（例如智谱、DeepSeek），我可以按那家的文档帮你写一版 `.env.local` 示例和注意事项（例如 `OPENAI_BASE_URL` 填什么）。
